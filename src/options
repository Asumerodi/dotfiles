options () {
  if [[ -z $@ ]]; then
    usage
    finish::failed
  fi

  options::parse $@
  # if any invalid arguement combinations print usage and exit
  if
    {
      ! (( ${FLAGS[(I)ALL]} )) \
        && ! (( ${FLAGS[(I)zsh]} )) \
        && ! (( ${FLAGS[(I)tmux]} )) \
        && ! (( ${FLAGS[(I)ghci]})) \
        && ! (( ${FLAGS[(I)neovim]} )) \
        && ! (( ${FLAGS[(I)x11]} ))
    } \
      || {
        (( ${FLAGS[(I)INSTALL]} )) && (( ${FLAGS[(I)UNINSTALL]} ))
      }
  then
    usage
    finish::failed
  fi
}

options::parse () {
  while getopts ':aiuztgnxh' flag; do
    case ${flag} in
      a) FLAGS+=ALL;;
      i) FLAGS+=INSTALL;;
      u) FLAGS+=UNINSTALL;;
      z) FLAGS+=zsh;;
      t) FLAGS+=tmux;;
      g) FLAGS+=ghci;;
      n) FLAGS+=neovim;;
      x) FLAGS+=x11;;
      h)
        usage
        exit 0
        ;;
      *)
        usage
        finish::failed
        ;;
    esac
  done
  readonly FLAGS
}
